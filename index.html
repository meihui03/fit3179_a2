<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>
    
    <!-- CSS file -->
    <link rel="stylesheet" type="text/css" href="idioms.css" media="all">
</head>
<body>
    <!-- Wrap the contents in a div with the class "page" -->
    <div class="page">
        <h1>Blood Donations in Malaysia (2006-2024)</h1>

        <p>This visualization provides insights into blood donation trends across Malaysia from 2006 to 2024, highlighting regional disparities and growth in donations.</p>

        <!-- Updated container with choropleth map on the left and description on the right -->
        <!-- <div class="container">
            <div id="choropleth_map"></div>
            <div id="description">
                <h2>Map Description</h2>
                <p>This map displays the regional distribution of blood donations across Malaysia. Areas with a darker shade represent higher donation rates, while lighter regions indicate lower rates.</p>
            </div>
        </div> -->
        
        
        <p>This map displays the regional distribution of blood donations across Malaysia. Areas with a darker shade represent higher donation rates, while lighter regions indicate lower rates.</p>
        <div id="choropleth_map"></div>
        

        <h2>New Donors Based on Age Group Over Time</h2>
        <p>The age group 17-24 consistently shows the highest number of new donors, peaking around 2008 with over 170,000 donors, before gradually declining after 2015. Despite the drop in recent years, it remains the largest contributor to new donations.
            The 25-29 and 30-34 age groups follow, with more stable trends but at much lower donation levels.Older age groups, such as 45-49 and above, contribute less, with relatively flat trends throughout the period. The chart reveals a significant decline 
            in donations across all age groups post-2015, potentially pointing to challenges in donor recruitment or other external factors affecting donation rates.
        </p>
        <div id="multiseries_line"></div>

        <p>The blood type O has the highest total donations. These blood types show significant contributions from both Centre and Mobile locations.
            Blood type A also has a substantial number of donations, with a fairly even split between the two locations.
            AB donations are significantly lower than the other blood types.</p>
        <p>The Whole Blood donation type stands out with the highest number of donations, as highlighted by the "Highest Donations Type" annotation.
            Other donation types, such as Apheresis Platelet, Apheresis Plasma and Other, show significantly fewer donations compared to Whole Blood.</p>
        <!-- <div class="piecharts-container">
            <div id="location_piechart"></div>
            <div id="type_blood_donation_piechart"></div>
        </div> -->

        <!-- <div id="bloodtype_isotype"></div> -->

        <div class="charts-container">
            <div id="bloodtype_chart"></div>
            <div id="lolilpopchart"></div>
        </div>

        <!-- <div id="bloodtype_chart"></div>

        <div id="lolilpopchart"></div> -->


          <p class="left-aligned-links">
            This visualisation is created by Lok Mei Hui. <br> 
            Data Source: <br>
            <a href="https://data.moh.gov.my/data-catalogue/blood_donations_state?state=sabah&blood_type=a&visual=table" target="_blank">
              https://data.moh.gov.my/data-catalogue/blood_donations_state?state=sabah&blood_type=a&visual=table
            </a><br>
            
            <a href="https://github.com/MoH-Malaysia/covid19-public/blob/main/static/population.csv" target="_blank">
              https://github.com/MoH-Malaysia/covid19-public/blob/main/static/population.csv
            </a><br>
            
            <a href="https://github.com/MoH-Malaysia/data-darah-public/blob/main/donations_state.csv" target="_blank">
              https://github.com/MoH-Malaysia/data-darah-public/blob/main/donations_state.csv
            </a>
        </p>
        
          
    </div>

    


    <script>
        var vg_1 = "js/choropleth_map.json";
        vegaEmbed("#choropleth_map", vg_1).then(function(result) {

        }).catch(console.error);

        var vg_2 = "js/multiseries_line.json";
        vegaEmbed("#multiseries_line", vg_2).then(function(result) {

        }).catch(console.error);

        // var vg_3 = "js/location_piechart.json";
        // vegaEmbed("#location_piechart", vg_3).then(function(result) {

        // }).catch(console.error);

        // var vg_4 = "js/bloodtype_piechart.json";
        // vegaEmbed("#type_blood_donation_piechart", vg_4).then(function(result) {

        // }).catch(console.error);

        var vg_6 = "js/lolilpopchart.json";
        vegaEmbed("#lolilpopchart", vg_6).then(function(result) {

        }).catch(console.error);

        var vg_7 = "js/bloodtype_chart.json";
        vegaEmbed("#bloodtype_chart", vg_7).then(function(result) {

        }).catch(console.error);

    </script>
</body>
</html>
